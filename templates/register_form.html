{% extends 'base.html' %}
{% block content %}


    <h2>Register</h2>

    <form action="/register" method="POST" id="registration-form">
      Email: <input type="text" name="email" id="email"><br>
      Password: <input type="text" name="password" id="password"><br>
      Age: <input type="integer" name="age" id="age"><br>
      Zipcode: <input type="text" name="zipcode" id="zipcode"><br>
      <input type="submit" id="register-now">

    </form>
    <script src="https://code.jquery.com/jquery.js"></script>

<script>
function successForm(result) {
  if (result == "You are now registered!"){
    window.location.assign("/login");
  }
  else {
    window.location.assign("/register");
  }
}

function validateForm(evt){
  var formInputs= {
    'email' : $("#email").val(),
    'password' : $("#password").val(),
    'age' : $("#age").val(),
    'zipcode' : $("#zipcode").val(),
  };

  $.post('/register', formInputs, successForm);

  evt.preventDefault();
}


$('#register-now').on('click', validateForm);
</script>
{% endblock %}

